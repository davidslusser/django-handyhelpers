{% load form_tags %}

{% for field in form %}

{% if field.widget_type in "text,email" %}
<div class="form-floating mb-3">
    {% with form|get_form_errors:field.name as errors %}
        {% with form|get_field_value:field.name as value %}
            <input name="{{ field.name }}"
            type="text" 
            class="form-control {% if errors %}is-invalid{% endif %}" 
            {% if value %}value="{{ value }}"{% endif %} 
            id="id_{{ field.name }}"
            placeholder="">
            <label for="id_{{ field.name }}">{{ field.label }}</label>
            {% if errors %}
                <div class="invalid-feedback">{{ errors }}</div>
            {% endif %}
        {% endwith %}
    {% endwith %}
</div>

{% elif field.widget_type in "textarea" %}
<div class="form-floating mb-3">
    {% with form|get_form_errors:field.name as errors %}
        {% with form|get_field_value:field.name as value %}
            <textarea name="{{ field.name }}" class="form-control {% if errors %}is-invalid{% endif %}" id="id_{{ field.name }}" rows="5" placeholder="">{% if value %}{{ value }}{% endif %}</textarea>
            <label for="id_{{ field.name }}">{{ field.label }}</label>
            {% if errors %}
                <div class="invalid-feedback">{{ errors }}</div>
            {% endif %}
        {% endwith %}
    {% endwith %}
</div>
{% endif %}

{% endfor %}
